<tr id="task-{{ t.id }}" class="align-top task-row">
  <td class="col-goal">
    <div class="goal-title fw-semibold">{{ t.title or t.goal }}</div>
    {% if t.topic %}
      <div class="goal-topic text-muted small mt-1">
        <span class="text-secondary">Topic:</span>
        {{ t.topic | replace('\n','<br>') | safe }}
      </div>
    {% endif %}
  </td>

  <td class="col-notes">
    {% if t.notes %}
      <div class="notes-preview small">{{ t.notes | replace('\n','<br>') | safe }}</div>
      <a class="muted-link small d-block mt-1"
         hx-get="{{ url_for('edit_notes_form', task_id=t.id) }}"
         hx-target="#task-{{ t.id }}"
         hx-swap="outerHTML">Edit notes</a>
    {% else %}
      <a class="muted-link small"
         hx-get="{{ url_for('edit_notes_form', task_id=t.id) }}"
         hx-target="#task-{{ t.id }}"
         hx-swap="outerHTML">Click to add notes</a>
    {% endif %}
  </td>

  <td class="col-status text-left">
    {% set s = t.status %}
    <span class="badge {{ 'badge-gray' if s=='Not Started' else 'badge-blue' if s=='In Progress' else 'badge-green' }}">
      {{ s }}
    </span>
  </td>
</tr>
